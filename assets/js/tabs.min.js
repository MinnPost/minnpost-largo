!function(t){var i;!function(t,i){if("undefined"!=typeof module&&module.exports&&"function"==typeof require)module.exports=i(require("jquery"),require("underscore"));else if("function"==typeof define&&define.amd)define(["jquery","underscore"],i);else{if(!t.jQuery||!t._)throw new Error("Could not find dependencies for MinnPost Styles Navigation.");t.MP=t.MP||{},t.MP.nav=i(t.jQuery,t._)}}("undefined"!=typeof window?window:this,function(n,t){function i(t,i){this.element=t,this.$element=n(t),this._defaults=s.MPStickDefaults,this.options=n.extend({},this._defaults,i),this._name="mpStick",this._scrollEvent="scroll.mp.mpStick",this._on=!1,this.init()}function e(t,i){this.element=t,this.$element=n(t),this._defaults=s.MPScrollSpyDefaults,this.options=n.extend({},this._defaults,i),this._name="mpScollSpy",this._scrollEvent="scroll.mp.mpScollSpy",this.init()}var s={MPStickDefaults:{activeClass:"stuck top",wrapperClass:"minnpost-full-container",topPadding:0,throttle:90}};return i.prototype={init:function(){this.$container=void 0===this.options.container?this.$element.parent():n(this.options.container),this.elementHeight=this.$element.outerHeight(!0),this.$spacer=n("<div>").height(this.elementHeight).hide(),this.$element.after(this.$spacer),this.options.wrapperClass&&this.$element.wrapInner('<div class="'+this.options.wrapperClass+'"></div>'),this._throttledListen=t.bind(t.throttle(this.listen,this.options.throttle),this),this._throttledListen(),n(window).on(this._scrollEvent,this._throttledListen)},listen:function(){var t=this.$container.offset().top,i=t+this.$container.height(),e=n(window).scrollTop(),t=t-this.options.topPadding,i=i-this.elementHeight-this.options.topPadding-2;!this._on&&t<e&&e<i?this.on():this._on&&(e<t||i<e)&&this.off()},on:function(){this.$element.addClass(this.options.activeClass),this.options.topPadding&&this.$element.css("top",this.options.topPadding),this.$spacer.show(),this._on=!0},off:function(){this.$element.removeClass(this.options.activeClass),this.options.topPadding&&this.$element.css("top","inherit"),this.$spacer.hide(),this._on=!1},remove:function(){this.$container.off(this._scrollEvent)}},n.fn.mpStick=function(t){return this.each(function(){n.data(this,"mpStick")||n.data(this,"mpStick",new i(this,t))})},s.MPScrollSpyDefaults={activeClass:"active",offset:80,throttle:200,gotoEvent:"click",gotoPreventDefault:!0,gotoSpeed:600},e.prototype={init:function(){this.$listeners=this.$element.find("[data-spy-on]"),this.$targets=this.$element.find("[data-spy-me]"),this._throttledListen=t.bind(t.throttle(this.listen,this.options.throttle),this),this._throttledListen(),n(window).on(this._scrollEvent,this._throttledListen),this.options.gotoEvent&&this.$listeners.on(this.options.gotoEvent,t.bind(this.gotoClick,this))},listen:function(){var i,e=this,s=n(window).scrollTop();this.$targets.each(function(){var t=n(this);t.offset().top<=s+(e.options.offset+5)&&(i=t.data("spyMe"))}),i&&(this.$listeners.removeClass(this.options.activeClass),this.$element.find('[data-spy-on="'+i+'"]').addClass(this.options.activeClass))},gotoClick:function(t){this.options.gotoPreventDefault&&t.preventDefault(),n(t.target),this.goto(n(t.target).data("spyOn"))},goto:function(t){t=this.$element.find('[data-spy-me="'+t+'"]').offset().top;n("html, body").animate({scrollTop:t-this.options.offset},this.options.gotoSpeed)},remove:function(){this.$container.off(this._scrollEvent)}},n.fn.mpScrollSpy=function(t){return this.each(function(){n.data(this,"mpScrollSpy")||n.data(this,"mpScrollSpy",new e(this,t))})},s}),t("body").mpScrollSpy(),t(".in-page").mpStick(),t(".in-page").hasClass("stuck")&&(i=t(".top").next().height(),t(".panel:visible").css("marginTop",i));var e=null,s=t(".tab").on("click",function(){e=t(this.hash).removeAttr("id"),location.hash===this.hash&&setTimeout(h)}).attr("tabindex","0"),n=s.map(function(){return this.hash}).get(),o=t(n.join(",")).each(function(){t(this).data("old-id",this.id)});function h(){e&&(e.attr("id",e.data("old-id")),e=null);var t=window.location.hash;if(-1!==n.indexOf(t))return a(t);t||a()}function a(t){t=t||n[0],s.removeClass("selected").attr("aria-selected","false").filter(function(){return this.hash===t}).addClass("selected").attr("aria-selected","true"),o.hide().attr("aria-hidden","true").filter(t).show().attr("aria-hidden","false")}window.addEventListener("hashchange",h),(-1!==n.indexOf(window.location.hash)?h:a)(),t(".x").on("click",function(){t(this).closest("nav").toggleClass("open")})}(jQuery);