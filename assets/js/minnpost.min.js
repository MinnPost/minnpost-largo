"use strict";function mp_analytics_tracking_event(e,a,t,n,i){"undefined"!=typeof ga&&(void 0===i?ga("send",e,a,t,n):ga("send",e,a,t,n,i))}function trackShare(e,a){(jQuery("body ").hasClass("logged-in")||"Email"!==e)&&(mp_analytics_tracking_event("event","Share - "+a,e,location.pathname),"undefined"!=typeof ga&&("Facebook"!==e&&"Twitter"!==e||("Facebook"==e?ga("send","social",e,"Share",location.pathname):ga("send","social",e,"Tweet",location.pathname))))}!function(i){i(".m-entry-share-top a").click(function(e){trackShare(i(this).text().trim(),"top")}),i(".m-entry-share-bottom a").click(function(e){trackShare(i(this).text().trim(),"bottom")}),i("#navigation-featured a").click(function(e){mp_analytics_tracking_event("event","Featured Bar Link","Click",this.href)}),i("a.glean-sidebar").click(function(e){mp_analytics_tracking_event("event","Sidebar Support Link","Click",this.href)}),i("a",i(".o-site-sidebar")).click(function(e){var a=i(this).closest(".m-widget").find("h3").text(),t="";""===a||(t=a),mp_analytics_tracking_event("event","Sidebar Link","Click",t)}),i(document).ready(function(e){if("undefined"!=typeof PUM){PUM.getPopup(i(".pum"));var a=PUM.getSettings(i(".pum")).id;i(document).on("pumAfterOpen",function(){mp_analytics_tracking_event("event","Popup","Show",a,{nonInteraction:1})}),i(document).on("pumAfterClose",function(){var e=i.fn.popmake.last_close_trigger;void 0!==e&&mp_analytics_tracking_event("event","Popup",e,a,{nonInteraction:1})}),i(".message-close").click(function(e){mp_analytics_tracking_event("event","Popup","Close Button",a,{nonInteraction:1})}),i(".message-login").click(function(e){mp_analytics_tracking_event("event","Popup","Login Link",i(this).attr("href"))}),i(".pum-content a:not( .message-close, .pum-close, .message-login )").click(function(e){mp_analytics_tracking_event("event","Popup","Click",a)})}if("undefined"!=typeof minnpost_membership_data&&""!==minnpost_membership_data.url_access_level){var t=location.pathname,n="Blocked";!0===minnpost_membership_data.current_user.can_access&&(n="Shown"),mp_analytics_tracking_event("event","Member Content",n,t)}})}(jQuery),function(f){function d(e){return'<li class="a-form-caption a-form-confirm"><label>Are you sure? <a id="a-confirm-'+e+'" href="#">Yes</a> | <a id="a-stop-'+e+'" href="#">No</a></label></li>'}jQuery.fn.textNodes=function(){return this.contents().filter(function(){return this.nodeType===Node.TEXT_NODE&&""!==this.nodeValue.trim()})},jQuery(document).ready(function(e){var a,n,t,i,r,o,s,l,c,m,u,p;0<e(".m-form-email").length&&(a=f("#account-settings-form"),n=user_account_management_rest.site_url+user_account_management_rest.rest_namespace+"/update-user/",i=1,c=[],m=[],p=u=l=s=o=r=t="",f('.a-form-caption.a-make-primary-email input[type="radio"]').prop("checked",!1),f('.a-form-caption.a-remove-email input[type="checkbox"]').prop("checked",!1),0<f(".m-user-email-list").length&&(i=f(".m-user-email-list > li").length,f(".m-user-email-list").on("click",'.a-form-caption.a-make-primary-email input[type="radio"]',function(e){r=f(this).val(),o=f("#email").val(),s=f(this).prop("id").replace("primary_email_",""),t=d("primary-change"),p=f(this).parent().parent(),f(".a-pre-confirm",p).hide(),f(".a-form-confirm",p).show(),f(this).parent().parent().addClass("a-pre-confirm"),f(this).parent().parent().removeClass("a-stop-confirm"),f(this).parent().parent().append(t),f(".m-user-email-list").on("click","#a-confirm-primary-change",function(e){e.preventDefault(),f(".m-user-email-list > li").textNodes().first().replaceWith(r),f("#user-email-"+s).textNodes().first().replaceWith(o),f("#email").val(r),a.submit(),f('.a-form-caption.a-make-primary-email input[type="radio"]').prop("checked",!1),f("#primary_email_"+s).val(o),f("#remove_email_"+s).val(o),f(".a-form-confirm",p.parent()).remove(),f(".a-pre-confirm",p.parent()).show()}),f(".m-user-email-list").on("click","#a-stop-primary-change",function(e){e.preventDefault(),f(".a-pre-confirm",p.parent()).show(),f(".a-form-confirm",p.parent()).remove()})}),f(".m-user-email-list").on("change",'.a-form-caption.a-remove-email input[type="checkbox"]',function(e){l=f(this).val(),t=d("removal"),f(".m-user-email-list > li").each(function(e){f(this).contents().get(0).nodeValue!==l&&c.push(f(this).contents().get(0).nodeValue)}),p=f(this).parent().parent(),f(".a-pre-confirm",p).hide(),f(".a-form-confirm",p).show(),f(this).parent().parent().addClass("a-pre-confirm"),f(this).parent().parent().removeClass("a-stop-confirm"),f(this).parent().parent().append(t),f(".m-user-email-list").on("click","#a-confirm-removal",function(e){e.preventDefault(),f(this).parents("li").fadeOut("normal",function(){f(this).remove()}),f("#_consolidated_emails").val(c.join(",")),console.log("value is "+c.join(",")),i=f(".m-user-email-list > li").length,a.submit(),f(".a-form-confirm",p.parent()).remove()}),f(".m-user-email-list").on("click","#a-stop-removal",function(e){e.preventDefault(),f(".a-pre-confirm",p.parent()).show(),f(".a-form-confirm",p.parent()).remove()})})),f(".m-form-email").on("click",".a-form-caption.a-add-email",function(e){e.preventDefault(),f(".a-form-caption.a-add-email").before('<div class="a-input-with-button a-button-sentence"><input type="email" name="_consolidated_emails_array[]" id="_consolidated_emails_array[]" value=""><button type="submit" name="a-add-email-'+i+'" id="a-add-email-'+i+'" class="a-button a-button-add-user-email">Add</button></div>'),i++}),f("input[type=submit]").click(function(e){var a=f(this);a.closest("form").data("submitting_button",a.val())}),f(".m-entry-content").on("submit","#account-settings-form",function(e){var a=f(this),t=a.data("submitting_button")||"";""!==t&&"Save Changes"===t||(e.preventDefault(),u=a.serialize(),u+="&rest=true",f.ajax({url:n,type:"post",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",user_account_management_rest.nonce)},dataType:"json",data:u}).done(function(e){m=f('input[name="_consolidated_emails_array[]"]').map(function(){return f(this).val()}).get(),f.each(m,function(e,a){i+=e,f(".m-user-email-list").append('<li id="user-email-'+i+'">'+a+'<ul class="a-form-caption a-user-email-actions"><li class="a-form-caption a-pre-confirm a-make-primary-email"><input type="radio" name="primary_email" id="primary_email_'+i+'" value="'+a+'"><label for="primary_email_'+i+'"><small>Make Primary</small></label></li><li class="a-form-caption a-pre-confirm a-email-preferences"><a href="/subscribe/?email='+encodeURIComponent(a)+'"><small>Email Preferences</small></a></li><li class="a-form-caption a-pre-confirm a-remove-email"><input type="checkbox" name="remove_email['+i+']" id="remove_email_'+i+'" value="'+a+'"><label for="remove_email_'+i+'"><small>Remove</small></label></li></ul></li>'),f("#_consolidated_emails").val(f("#_consolidated_emails").val()+","+a)}),f(".m-form-change-email .a-input-with-button").remove(),0===f(".m-user-email-list").length&&f('input[name="_consolidated_emails_array[]"]')!==f('input[name="email"]')&&location.reload()}))}))})}(jQuery),jQuery(document).ready(function(e){function a(i){var e,a,t,n,r;if((i=document.getElementById(i))&&void 0!==(e=i.getElementsByTagName("button")[0]))if(void 0!==(a=i.getElementsByTagName("ul")[0])){for(a.setAttribute("aria-expanded","false"),-1===a.className.indexOf("menu")&&(a.className+=" menu"),e.onclick=function(){-1!==i.className.indexOf("toggled")?(i.className=i.className.replace(" toggled",""),e.setAttribute("aria-expanded","false"),a.setAttribute("aria-expanded","false")):(i.className+=" toggled",e.setAttribute("aria-expanded","true"),a.setAttribute("aria-expanded","true"))},n=0,r=(t=a.getElementsByTagName("a")).length;n<r;n++)t[n].addEventListener("focus",o,!0),t[n].addEventListener("blur",o,!0);!function(e){var a,t,n=i.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a");if("ontouchstart"in window)for(a=function(e){var a,t=this.parentNode;if(t.classList.contains("focus"))t.classList.remove("focus");else{for(e.preventDefault(),a=0;a<t.parentNode.children.length;++a)t!==t.parentNode.children[a]&&t.parentNode.children[a].classList.remove("focus");t.classList.add("focus")}},t=0;t<n.length;++t)n[t].addEventListener("touchstart",a,!1)}()}else e.style.display="none"}function o(){for(var e=this;-1===e.className.indexOf("menu");)"li"===e.tagName.toLowerCase()&&(-1!==e.className.indexOf("focus")?e.className=e.className.replace(" focus",""):e.className+=" focus"),e=e.parentElement}a("navigation-primary"),a("navigation-user-account-management")}),jQuery(document).ready(function(a){0<a("#user-account-access ul").length&&a("#user-account-access > li > a").on("click",function(e){a("#user-account-access ul").toggleClass("visible"),e.preventDefault()})});