"use strict";function mp_analytics_tracking_event(e,a,t,n,i){"undefined"!=typeof ga&&(void 0===i?ga("send",e,a,t,n):ga("send",e,a,t,n,i))}function trackShare(e,a){!jQuery("body ").hasClass("logged-in")&&"Email"===e||(mp_analytics_tracking_event("event","Share - "+a,e,location.pathname),"undefined"!=typeof ga&&("Facebook"!==e&&"Twitter"!==e||("Facebook"==e?ga("send","social",e,"Share",location.pathname):ga("send","social",e,"Tweet",location.pathname))))}!function(i){i(".m-entry-share-top a").click(function(e){trackShare(i(this).text().trim(),"top")}),i(".m-entry-share-bottom a").click(function(e){trackShare(i(this).text().trim(),"bottom")}),i("#navigation-featured a").click(function(e){mp_analytics_tracking_event("event","Featured Bar Link","Click",this.href)}),i("a.glean-sidebar").click(function(e){mp_analytics_tracking_event("event","Sidebar Support Link","Click",this.href)}),i("a",i(".o-site-sidebar")).click(function(e){var a=i(this).closest(".m-widget").find("h3").text(),t=i(this).closest(".m-zone").find(".a-zone-title").text(),n="";""!==a?n=a:""!==t&&(n=t),mp_analytics_tracking_event("event","Sidebar Link","Click",n)}),i(document).ready(function(e){if("undefined"!=typeof PUM){PUM.getPopup(i(".pum"));var a=PUM.getSettings(i(".pum")).id;i(document).on("pumAfterOpen",function(){mp_analytics_tracking_event("event","Popup","Show",a,{nonInteraction:1})}),i(document).on("pumAfterClose",function(){var e=i.fn.popmake.last_close_trigger;void 0!==e&&mp_analytics_tracking_event("event","Popup",e,a,{nonInteraction:1})}),i(".message-close").click(function(e){mp_analytics_tracking_event("event","Popup","Close Button",a,{nonInteraction:1})}),i(".message-login").click(function(e){mp_analytics_tracking_event("event","Popup","Login Link",i(this).attr("href"))}),i(".pum-content a:not( .message-close, .pum-close, .message-login )").click(function(e){mp_analytics_tracking_event("event","Popup","Click",a)})}if("undefined"!=typeof minnpost_membership_data&&""!==minnpost_membership_data.url_access_level){var t=location.pathname,n="Blocked";!0===minnpost_membership_data.current_user.can_access&&(n="Shown"),mp_analytics_tracking_event("event","Member Content",n,t)}})}(jQuery),function(d){function f(e){return'<li class="a-form-caption a-form-confirm"><label>Are you sure? <a id="a-confirm-'+e+'" href="#">Yes</a> | <a id="a-stop-'+e+'" href="#">No</a></label></li>'}jQuery.fn.textNodes=function(){return this.contents().filter(function(){return this.nodeType===Node.TEXT_NODE&&""!==this.nodeValue.trim()})},jQuery(document).ready(function(e){var a,n,t,i,o,r,s,l,c,m,u,p;0<e(".m-form-email").length&&(a=d("#account-settings-form"),n=user_account_management_rest.site_url+user_account_management_rest.rest_namespace+"/update-user/",i=1,c=[],m=[],p=u=l=s=r=o=t="",d('.a-form-caption.a-make-primary-email input[type="radio"]').prop("checked",!1),d('.a-form-caption.a-remove-email input[type="checkbox"]').prop("checked",!1),0<d(".m-user-email-list").length&&(i=d(".m-user-email-list > li").length,d(".m-user-email-list").on("click",'.a-form-caption.a-make-primary-email input[type="radio"]',function(e){o=d(this).val(),r=d("#email").val(),s=d(this).prop("id").replace("primary_email_",""),t=f("primary-change"),p=d(this).parent().parent(),d(".a-pre-confirm",p).hide(),d(".a-form-confirm",p).show(),d(this).parent().parent().addClass("a-pre-confirm"),d(this).parent().parent().removeClass("a-stop-confirm"),d(this).parent().parent().append(t),d(".m-user-email-list").on("click","#a-confirm-primary-change",function(e){e.preventDefault(),d(".m-user-email-list > li").textNodes().first().replaceWith(o),d("#user-email-"+s).textNodes().first().replaceWith(r),d("#email").val(o),a.submit(),d('.a-form-caption.a-make-primary-email input[type="radio"]').prop("checked",!1),d("#primary_email_"+s).val(r),d("#remove_email_"+s).val(r),d(".a-form-confirm",p.parent()).remove(),d(".a-pre-confirm",p.parent()).show()}),d(".m-user-email-list").on("click","#a-stop-primary-change",function(e){e.preventDefault(),d(".a-pre-confirm",p.parent()).show(),d(".a-form-confirm",p.parent()).remove()})}),d(".m-user-email-list").on("change",'.a-form-caption.a-remove-email input[type="checkbox"]',function(e){l=d(this).val(),t=f("removal"),d(".m-user-email-list > li").each(function(e){d(this).contents().get(0).nodeValue!==l&&c.push(d(this).contents().get(0).nodeValue)}),p=d(this).parent().parent(),d(".a-pre-confirm",p).hide(),d(".a-form-confirm",p).show(),d(this).parent().parent().addClass("a-pre-confirm"),d(this).parent().parent().removeClass("a-stop-confirm"),d(this).parent().parent().append(t),d(".m-user-email-list").on("click","#a-confirm-removal",function(e){e.preventDefault(),d(this).parents("li").fadeOut("normal",function(){d(this).remove()}),d("#_consolidated_emails").val(c.join(",")),console.log("value is "+c.join(",")),i=d(".m-user-email-list > li").length,a.submit(),d(".a-form-confirm",p.parent()).remove()}),d(".m-user-email-list").on("click","#a-stop-removal",function(e){e.preventDefault(),d(".a-pre-confirm",p.parent()).show(),d(".a-form-confirm",p.parent()).remove()})})),d(".m-form-email").on("click",".a-form-caption.a-add-email",function(e){e.preventDefault(),d(".a-form-caption.a-add-email").before('<div class="a-input-with-button a-button-sentence"><input type="email" name="_consolidated_emails_array[]" id="_consolidated_emails_array[]" value=""><button type="submit" name="a-add-email-'+i+'" id="a-add-email-'+i+'" class="a-button a-button-add-user-email">Add</button></div>'),i++}),d("input[type=submit]").click(function(e){var a=d(this);a.closest("form").data("submitting_button",a.val())}),d(".m-entry-content").on("submit","#account-settings-form",function(e){var a=d(this),t=a.data("submitting_button")||"";""!==t&&"Save Changes"===t||(e.preventDefault(),u=a.serialize(),u+="&rest=true",d.ajax({url:n,type:"post",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",user_account_management_rest.nonce)},dataType:"json",data:u}).done(function(e){m=d('input[name="_consolidated_emails_array[]"]').map(function(){return d(this).val()}).get(),d.each(m,function(e,a){i+=e,d(".m-user-email-list").append('<li id="user-email-'+i+'">'+a+'<ul class="a-form-caption a-user-email-actions"><li class="a-form-caption a-pre-confirm a-make-primary-email"><input type="radio" name="primary_email" id="primary_email_'+i+'" value="'+a+'"><label for="primary_email_'+i+'"><small>Make Primary</small></label></li><li class="a-form-caption a-pre-confirm a-email-preferences"><a href="/newsletters/?email='+encodeURIComponent(a)+'"><small>Email Preferences</small></a></li><li class="a-form-caption a-pre-confirm a-remove-email"><input type="checkbox" name="remove_email['+i+']" id="remove_email_'+i+'" value="'+a+'"><label for="remove_email_'+i+'"><small>Remove</small></label></li></ul></li>'),d("#_consolidated_emails").val(d("#_consolidated_emails").val()+","+a)}),d(".m-form-change-email .a-input-with-button").remove(),0===d(".m-user-email-list").length&&d('input[name="_consolidated_emails_array[]"]')!==d('input[name="email"]')&&location.reload()}))}))})}(jQuery),jQuery(document).ready(function(i){function e(n){var e,a,t,i,o;if((n=document.getElementById(n))&&void 0!==(e=n.getElementsByTagName("button")[0]))if(void 0!==(a=n.getElementsByTagName("ul")[0])){for(a.setAttribute("aria-expanded","false"),-1===a.className.indexOf("menu")&&(a.className+=" menu"),e.onclick=function(){-1!==n.className.indexOf("toggled")?(n.className=n.className.replace(" toggled",""),e.setAttribute("aria-expanded","false"),a.setAttribute("aria-expanded","false")):(n.className+=" toggled",e.setAttribute("aria-expanded","true"),a.setAttribute("aria-expanded","true"))},i=0,o=(t=a.getElementsByTagName("a")).length;i<o;i++)t[i].addEventListener("focus",r,!0),t[i].addEventListener("blur",r,!0);!function(){var e,a,t=n.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a");if("ontouchstart"in window)for(e=function(e){var a,t=this.parentNode;if(t.classList.contains("focus"))t.classList.remove("focus");else{for(e.preventDefault(),a=0;a<t.parentNode.children.length;++a)t!==t.parentNode.children[a]&&t.parentNode.children[a].classList.remove("focus");t.classList.add("focus")}},a=0;a<t.length;++a)t[a].addEventListener("touchstart",e,!1)}()}else e.style.display="none"}function r(){for(var e=this;-1===e.className.indexOf("menu");)"li"===e.tagName.toLowerCase()&&(-1!==e.className.indexOf("focus")?e.className=e.className.replace(" focus",""):e.className+=" focus"),e=e.parentElement}e("navigation-primary"),e("navigation-user-account-management"),function(e){var a,t,n;if(!(e=document.getElementById(e)))return;if(a=i("li.search",i(e)),t=i("li.search a",i(e)),n=e.getElementsByTagName("form")[0],void 0===t||void 0===n)return;0<i(n).length&&(i(document).click(function(e){!i(e.target).closest(a).length&&i(n).is(":visible")&&(n.className=n.className.replace(" toggled-form",""),i(t).prop("aria-expanded",!1),i(t).removeClass("toggled-form"))}),i(t).on("click",function(e){e.preventDefault(),-1!==n.className.indexOf("toggled-form")?(n.className=n.className.replace(" toggled-form",""),i(t).prop("aria-expanded",!1),i(t).removeClass("toggled-form")):(n.className+=" toggled-form",i(t).prop("aria-expanded",!0),i(t).addClass("toggled-form"))}))}("navigation-primary")}),jQuery(document).ready(function(a){0<a("#user-account-access ul").length&&a("#user-account-access > li > a").on("click",function(e){a("#user-account-access ul").toggleClass("visible"),e.preventDefault()})});